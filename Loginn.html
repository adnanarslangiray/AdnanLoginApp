<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>


    <title></title>
    <script src="Content/jquery-3.2.1.min.js"></script>
    <script src="Content/jquery.cookie.js"></script>
    <script src="Content/kullanicilar.js"></script>
    <style>
        #login-sayfasi {
           
            border: 3px solid #f1f1f1;
            width: 500px;
            margin:  auto;
            padding: 20px;
            background: rgba(255,255,255, 0.2);
            box-shadow: 0px 0px 23px 6px grey;
        }

        #kullaniciAdi, #sifre {
            display: inline-block;
            text-align: left;
            outline: none;
            font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
            font-size: x-large;
            width: 100%;
            height: 50px;
            margin-top: 80px;
            margin-bottom: 10px;
            border-radius: 10px;
        }

        #sifre {
            margin-top: 50px;
        }

      
        .ust-bilgi {
            display: flex;
            -ms-flex-direction: row;
            flex-direction: row;
            width: 100%;
            margin: 10px 10px 0px;
            box-shadow: 0 0 black;
        }

        .sol-ust-cizgi {
            display: inline;
            -webkit-box-flex: 1;
            flex-grow: 1;
            flex-shrink: 1;
            background-color: #c7c7c7;
            height: 1px;
            position: relative;
            top: .45em;
        }

        .ust-yazi {
            display: inline;
            color: #999;
            -webkit-box-flex: 0;
            flex-grow: 0;
            flex-shrink: 0;
            font-size: 20px;
            font-weight: 600;
            line-height: 15px;
            margin: 0 18px;
            text-transform: uppercase;
        }

        .sag-ust-cizgi {
            display: inline;
            -webkit-box-flex: 1;
            flex-grow: 1;
            flex-shrink: 1;
            background-color: #c7c7c7;
            height: 1px;
            position: relative;
             top: .45em;
        }
        .alt-bilgi {
            display: flex;
            -ms-flex-direction: row;
            flex-direction: row;
            width: 100%;
            margin: 40px 10px 10px;
            box-shadow: 0 0 black;
        }

        .sol-alt-cizgi {
            display: inline;
            -webkit-box-flex: 1;
            flex-grow: 1;
            flex-shrink: 1;
            background-color: #c7c7c7;
            height: 1px;
            margin-top: 15px;
            position: relative;
            top: .45em;
        }
        .sag-alt-cizgi {
            display: inline;
            -webkit-box-flex: 1;
            flex-grow: 1;
            flex-shrink: 1;
            margin-top:15px;
            background-color: #c7c7c7;
            height: 1px;
            position: relative;
            top: .45em;
        }
        #giris {
            display: inline-block;
            width: 170px;
            height: 60px;
            color: aliceblue;
            font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
            font-size: 25px;
            border-radius: 10px;
            margin-left: 180px;
            background-color: #3897f0;
            border-color: #3897f0;
            outline: none;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            flex-grow: 0;
            font-weight: 600;
            margin: 0 18px;
            -moz-box-shadow: 0 0 65px rgba(0,0,0,0.2);
        }

        .uyari {
            display: block;
            margin: 30px 40px;
            font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
            font-size: 20px;
            color: #ed4956;
        }
    </style>
</head>
<body>
    <div id="login-sayfasi">
        <div class="ust-bilgi">
          <div class="sol-ust-cizgi"></div> 
          <div class="ust-yazi">PLEASE LOG IN </div>
          <div class="sag-ust-cizgi"></div>

        </div>
          <input id="kullaniciAdi" type="text" value="" placeholder="Username"  onkeydown="if (event.charCode >= 48 && event.charCode <= 57 & event.charCode >= 65 && event.charCode <= 90) return" maxlength="20" />            
            <input id="sifre" type="password" value="" placeholder="Password"maxlength="8" />
        <div class="alt-bilgi">
            <div class="sol-alt-cizgi"></div>
            <button id="giris">Log In</button>
            <div class="sag-alt-cizgi"></div>
          </div>
           <span class="uyari"></span>
    </div>

    <script>
       /* var input = document.getElementById('kullaniciAdi');

        input.addEventListener('keypress', function (event) {
            if (event.charCode >= 48 && event.charCode <= 57) {
                checkID(input.value);
                return true;
            } else {
                return false;
            };
            input.addEventListener('keypress', handler2);
    */
        $(document).ready(function () {
            $("#kullaniciAdi" ||"sifre").on("keyup", function (event) {
                form_kontrolu();
            });
        });
        var form_kontrolu = function () {
            var k_Adi = $('#kullaniciAdi').val();
            var k_Sifre = $('#sifre').val();

         
             if (k_Adi.length < 2) {
                $('.uyari').text('Username bilgisini giriniz')
                return;
            }
            if (k_Sifre.length < 5) {
                $('.uyari').text('Password bilgisini giriniz')
               
                if (k_Sifre.length >= 5) {
                    $('.uyari').text('');
                    return;
            }
               
           }
        }
        var sayac = 0;
        $('#giris').on('click', function () {
            var k_Adi = $('#kullaniciAdi').val();
            var k_Sifre = $('#sifre').val();
            if (k_Adi.trim() == "" || k_Sifre.trim() == "") {
                $('.uyari').text('Username bilgisini giriniz veya Password bilgisini giriniz')
                return;
            }
            if (k_Adi.length < 2 && k_Sifre.length < 5  ) {
                $('.uyari').text('Login Hatalı');
                $('#kullaniciAdi').val('');
                $('#sifre').val('');
                return;
            }
           
            
            $.cookie("sayac", sayac, { expires: 100 });
            $.ajax({
                url: 'Content/kullanicilar.js',
                method: 'get',
                success: function (data) {

                    var kullanicilar = JSON.parse(data);
                    for (var i = 0; i < kullanicilar.length; i++) {
                        var kullanici = kullanicilar[i];
                        if (k_Adi == kullanici.kullanici_adi) {
                           
                            break;
                        } else { kullanici = ""; }
                    }
                    if (kullanici === "") {
                        $("#kullaniciAdi").text("");
                        $("#sifre").text("");
                        $('.uyari').text('UserName Sistemde Bulunmadı');
                        $('#giris').attr('disabled',true);
                        return;
                    }
                    if (kullanici.sifre === k_Sifre) {
                        $.cookie("sayac") == 0;
                        sayac = 0;
                        $('.uyari').text('Giriş Başarılı');
                        $('.uyari').css('color', 'green');

                        return;
                    } else {
                        if ($.cookie("sayac") == 3 || kullanici.hesapDurumu === "0") {
                            kullanici.hesapDurumu = "0";
                            $('.uyari').text('Hesap Bloke Edilmiştir !');
                            return;
                        } else {
                            sayac++
                            $('.uyari').text("");
                        }
                    }
                }
            })

        })

    </script>

</body>
</html>