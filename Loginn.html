<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>


    <title></title>
    <script src="Content/jquery-3.2.1.min.js"></script>
    <script src="Content/jquery.cookie.js"></script>
    <script src="Content/kullanicilar.js"></script>
    <style>
        #login-sayfasi {
            width: 700px;
            height: auto;
            margin: auto;
           
        }

        #kullaniciAdi, #sifre {
            display: block;
            text-align: left;
            font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
            font-size: x-large;
            width: 600px;
            height: 70px;
            margin-top: 200px;
            margin-bottom: 50px;
            border-radius: 10px;
        }

        #sifre {
            margin-top: 100px;
        }

        #giris {
            display: block;
            width: 170px;
            height: 80px;
            color:aliceblue;
            font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
            font-size: 25px;
            border-radius: 10px;
            margin-left: 200px;
            background-color: #0033cc;
            
        }
        .ust-bilgi {
            display:block;
            -webkit-box-orient: horizontal;
            margin-top: 200px;
             -ms-flex-direction: row;
            flex-direction: row;
            margin: 10px 40px 18px;
            box-shadow: 0 0 black;
        }
        .sol-cizgi {
            -webkit-box-flex: 1;
            flex-grow: 1;
            flex-shrink: 1;
            background-color: #c7c7c7;
            height: 1px;
            position: relative;
            
            top: .35em;
        }
        .ust-yazi {
            color: #999;
            -webkit-box-flex: 0;
           flex-grow: 0;
            flex-shrink: 0;
            font-size: 13px;
            font-weight: 600;
            line-height: 15px;
            margin: 0 18px;
            text-transform: uppercase;
        }
        .sag-cizgi {
            -webkit-box-flex: 1;
             flex-grow: 1;
             flex-shrink: 1;
            background-color: #c7c7c7;
            height: 1px;
            position: relative;
            top: .45em;
        }
      
        #denemeSayaci {
            display: inline-block;
            width: 675px;
            margin-top: 50px;
            margin-left: 200px;
           
            font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
            font-size: 20px;
            color: red;
        }
    </style>
</head>
<body>
    <div id="login-sayfasi">
        <div class="ust-bilgi">
          <div class="sol-cizgi"></div> 
          <div class="ust-yazi">PLEASE LOG IN </div>
          <div class="sag-cizgi"></div>

        </div>
           <input id="kullaniciAdi" type="text" value="" placeholder="Username" />             
            <input id="sifre" type="password" value="" placeholder="Password" />
            <button id="giris">Log In</button>
            <a id="denemeSayaci"></a>
    </div>

    <script>
      
        $.cookie('girisSayaci', '0')

        $('#giris').bind('click', function () {
            if (!$.cookie("login") & !$.cookie('loginBlocker')) {
                $.ajax({
                    url: 'Content/kullanicilar.js',
                    method: 'get',
                    success: function (data) {
                        var kullanicilar = JSON.parse(data);
                        var girisSayaci = parseInt($.cookie('girisSayaci'))
                        var kullaniciAdi = document.getElementById('kullaniciAdi').value
                        var sifre = document.getElementById('sifre').value

                       
                        if (kullaniciAdi == null || kullaniciAdi == "" || sifre == null || sifre == "") {
                            alert("Username bilgisini giriniz veya Password bilgisini giriniz");
                            return false;
                        }
                     
                        for (var i = 0; i < kullanicilar.length; i++) {

                            if (kullaniciAdi == kullanicilar[i].kullanici_adi & sifre == kullanicilar[i].sifre) {
                                //document.getElementById('denemeSayaci').innerHTML = 'GİRİŞ BAŞARILI!'
                                alert("GİRİŞ BAŞARILI!");
                               
                                $.cookie('login', kullaniciAdi, { expires: 1 })
                                break;
                            }
                            else if (kullaniciAdi == kullanicilar[i].kullanici_adi & sifre != kullanicilar[i].sifre) {
                                if (girisSayaci != 3 & !$.cookie('loginBlocker')) {
                                    $.cookie('girisSayaci', (girisSayaci++))
                                    document.getElementById('denemeSayaci').innerHTML = 3-$.cookie('girisSayaci') + ' ' + 'Deneme Hakkınız Kaldı'
                                }
                                else if (girisSayaci == 3 & !$.cookie('loginBlocker')) {
                                    document.getElementById('denemeSayaci').innerHTML = 'HESABINIZ BLOKE EDİLMİŞTİR!'
                                    break;
                                } 
                            }
                            else if (kullaniciAdi != kullanicilar[i].kullanici_adi & sifre != kullanicilar[i].sifre) {

                                alert("Login Hatalı!");

                                if (kullaniciAdi !== kullanicilar[i].kullanici_adi) {

                                    alert("UserName Sistemde Bulunmadı!");
                                    document.getElementById("giris").disabled = true;

                                    return;
                                }
                            }

                            

                        }
                    }
                })
            }
        })
        $('#giris').bind('click', function () {
            if ($.cookie('loginBlocker')) {
                document.getElementById('denemeSayaci').innerHTML = 'Hesabınız Bloke olmuştur .Lütfen Daha Sonra Tekrar Deneyin'
            }
        })

        if ($.cookie('login')) {
            document.getElementById('denemeSayaci').innerHTML = 'GİRİŞ BAŞARILI!'

        }




    </script>

</body>
</html>